<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd"> <mapper namespace="com.etop.website.dao.EcollegeDao">            <select id="searchList" resultType="com.etop.website.bean.Ecollege" parameterType="Map">         SELECT * from etop_train_course        </select>        <select id="searchInfo" resultType="com.etop.website.bean.Ecollege" parameterType="String">        SELECT * from etop_train_course where id=#{id}        </select>            <select id="selectTraining" resultType="com.etop.website.bean.Ecollege">       SELECT			*		FROM			(        SELECT            t1.id,t1.course_id,t1.course_name ,t1.course_type,t1.platform,t1.post,t1.target,t1.course_img,t1.choose_park as parkGroupId,t1.course_content,t1.createdAt        FROM            etop_offline_training t1        JOIN etop_park_group t2 ON t1.choose_park = t2.id        <where>        	t1.course_status in('0','1')            <if test="parkGroupId != null and parkGroupId != '' " >                and t1.choose_park =  #{parkGroupId}            </if>            <if test="courseType != null and courseType != '' " >                and t1.course_type =  #{courseType}            </if>            <if test="courseName != null and courseName != '' " >                and t1.course_name like CONCAT('%',#{courseName},'%')             </if>            <if test="target != null and target != '' " >                and t1.target like CONCAT('%',#{target},'%')             </if>            <if test="city != null and city != '' " >                and t1.city like CONCAT('%',#{city},'%')             </if>            <if test="offlineType == 0" >	            and t1.offline_type = '0'       		</if>            <if test="offlineType == 1" >	            and t1.offline_type in ('1','4')            </if>            <if test="offlineType == 2" >	            and t1.offline_type in ('2','3')            </if>        </where>        UNION        SELECT            t1.id,t1.course_id,t1.course_name ,t1.course_type,t1.platform,t1.post,t1.target,t1.course_img,t1.choose_park as parkGroupId,t1.course_content,t1.createdAt        FROM            etop_offline_training t1        JOIN etop_park_group t2 ON t1.choose_park = t2.id        <where>        	course_status in('0','1')            <if test="courseType != null and courseType != '' " >                and t1.course_type =  #{courseType}            </if>            <if test="courseName != null and courseName != '' " >                and t1.course_name like CONCAT('%',#{courseName},'%')             </if>            <if test="target != null and target != '' " >                and t1.target =#{target}            </if>            <if test="city != null and city != '' " >                and t1.city like CONCAT('%',#{city},'%')             </if>            <if test="offlineType == 0" >	            and t1.offline_type = '0'       		</if>            <if test="offlineType == 1" >	            and offline_type in ('1','4')            </if>            <if test="offlineType == 2" >	            and offline_type in ('2','3')            </if>        </where>        UNION        SELECT            t1.id,t1.course_id,t1.course_name ,t1.course_type,t1.platform,t1.post,t1.target,t1.course_img,t1.choose_park as parkGroupId,t1.course_content,t1.createdAt        FROM            etop_offline_training t1        JOIN etop_park_group t2 ON t1.choose_park = t2.id        <where>          t1.target like 'all%'          and t1.choose_park = 'all'          and course_status in('0','1')            <if test="courseType != null and courseType != '' " >                and t1.course_type =  #{courseType}            </if>            <if test="courseName != null and courseName != '' " >                and t1.course_name like CONCAT('%',#{courseName},'%')             </if>            <if test="city != null and city != '' " >                and t1.city like CONCAT('%',#{city},'%')             </if>            <if test="offlineType == 0" >	            and t1.offline_type = '0'       		</if>            <if test="offlineType == 1" >	            and offline_type in ('1','4')            </if>            <if test="offlineType == 2" >	            and offline_type in ('2','3')            </if>        </where>        UNION        SELECT            t2.id,t2.course_id,t2.course_name,t2.course_type,t2.platform,t2.post,t2.target,t2.cover_img,t2.choose_park as parkGroupId,t2.description,t2.created_at        FROM            etop_online_training t2        <where>            <if test="courseType != null and courseType != '' " >                and t2.course_type =  #{courseType}            </if>            <if test="courseName != null and courseName != '' " >                and t2.course_name =like CONCAT('%',#{courseName},'%')             </if>            <if test="target != null and target != '' " >                and t2.target  like CONCAT('%',#{target},'%')            </if>            <if test="parkGroupId != null and parkGroupId != '' " >                and t2.choose_park =  #{parkGroupId}            </if>        </where>        UNION        SELECT            t2.id,t2.course_id,t2.course_name,t2.course_type,t2.platform,t2.post,t2.target,t2.cover_img,t2.choose_park as parkGroupId,t2.description,t2.created_at        FROM            etop_online_training t2        <where>            <if test="courseType != null and courseType != '' " >                and t2.course_type =  #{courseType}            </if>            <if test="courseName != null and courseName != '' " >                and t2.course_name like CONCAT('%',#{courseName},'%')             </if>            <if test="target != null and target != '' " >                and t2.target  = #{target}            </if>        </where>        UNION         SELECT             t2.id,t2.course_id,t2.course_name,t2.course_type,t2.platform,t2.post,t2.target,t2.cover_img,t2.choose_park as parkGroupId,t2.description,t2.created_at        FROM            etop_online_training t2        <where>        	t2.target like 'all%'        	and t2.choose_park = 'all'            <if test="courseType != null and courseType != '' " >                and t2.course_type =  #{courseType}            </if>            <if test="courseName != null and courseName != '' " >                and t2.course_name like CONCAT('%',#{courseName},'%')             </if>        </where>        )T        GROUP BY T.createdAt DESC    </select>            <select id="selectOnlineInfo" resultType="com.etop.management.bean.EtopOnlineTraining">    SELECT			*		FROM			(        SELECT            *        FROM            etop_online_training t1        <where>            <if test="courseType != null and courseType != '' " >                and t1.course_type =  #{courseType}            </if>            <if test="courseName != null and courseName != '' " >                and t1.course_name like CONCAT('%',#{courseName},'%')             </if>            <if test="target != null and target != '' " >                and t1.target  like CONCAT('%',#{target},'%')            </if>            <if test="parkGroupId != null and parkGroupId != '' " >                and t1.choose_park =  #{parkGroupId}            </if>        </where>        UNION        SELECT            *        FROM            etop_online_training t1        <where>            <if test="courseType != null and courseType != '' " >                and t1.course_type =  #{courseType}            </if>            <if test="courseName != null and courseName != '' " >                and t1.course_name like CONCAT('%',#{courseName},'%')             </if>            <if test="target != null and target != '' " >                and t1.target  = #{target}            </if>        </where>        UNION         SELECT            *        FROM            etop_online_training t1        <where>       		 t1.target like 'all%'       		 and t1.choose_park = 'all'            <if test="courseType != null and courseType != '' " >                and t1.course_type =  #{courseType}            </if>            <if test="courseName != null and courseName != '' " >                and t1.course_name like CONCAT('%',#{courseName},'%')             </if>        </where>         )T        GROUP BY T.created_at DESC    </select>        <select id="selectOfflineInfo" resultType="com.etop.management.bean.EtopOfflineTraining">    	    SELECT				*			FROM				(        SELECT            *        FROM            etop_offline_training t1        <where>        	 course_status in('0','1')        	<if test="parkGroupId != null and parkGroupId != '' " >                and t1.choose_park =  #{parkGroupId}            </if>            <if test="courseType != null and courseType != '' " >                and t1.course_type =  #{courseType}            </if>            <if test="courseName != null and courseName != '' " >                and t1.course_name like CONCAT('%',#{courseName},'%')             </if>            <if test="target != null and target != '' " >                and t1.target like CONCAT('%',#{target},'%')             </if>            <if test="city != null and city != '' " >                and t1.city like CONCAT('%',#{city},'%')             </if>            <if test="offlineType == 0" >	            and t1.offline_type = '0'       		</if>            <if test="offlineType == 1" >	            and offline_type in ('1','4')            </if>            <if test="offlineType == 2" >	            and offline_type in ('2','3')            </if>        </where>        UNION        SELECT            *        FROM            etop_offline_training t1        <where>       		 course_status in('0','1')            <if test="courseType != null and courseType != '' " >                and t1.course_type =  #{courseType}            </if>            <if test="courseName != null and courseName != '' " >                and t1.course_name like CONCAT('%',#{courseName},'%')             </if>            <if test="target != null and target != '' " >                and t1.target = #{target}            </if>            <if test="city != null and city != '' " >                and t1.city like CONCAT('%',#{city},'%')             </if>            <if test="offlineType == 0" >	            and t1.offline_type = '0'       		</if>            <if test="offlineType == 1" >	            and offline_type in ('1','4')            </if>            <if test="offlineType == 2" >	            and offline_type in ('2','3')            </if>        </where>	        UNION		        SELECT	            *	        FROM            etop_offline_training t1	        <where>	          t1.target like 'all%'	          and t1.choose_park = 'all'	          and course_status in('0','1')	            <if test="courseType != null and courseType != '' " >	                and t1.course_type =  #{courseType}	            </if>	            <if test="courseName != null and courseName != '' " >	                and t1.course_name like CONCAT('%',#{courseName},'%') 	            </if>	            <if test="city != null and city != '' " >                and t1.city like CONCAT('%',#{city},'%')         	    </if>	            <if test="offlineType == 0" >		            and t1.offline_type = '0'	       		</if>	            <if test="offlineType == 1" >		            and t1.offline_type in ('1','4')	            </if>	            <if test="offlineType == 2" >		            and t1.offline_type in ('2','3')	            </if>	        </where>	         )T	        GROUP BY T.createdAt DESC      </select>    <select id="selectOffCourseInfo" resultType="com.etop.management.bean.EtopOfflineTraining">    	    SELECT				*			FROM				(        SELECT            *        FROM            etop_offline_training t1        <where>        	 course_status in('0','1','4')        	<if test="parkGroupId != null and parkGroupId != '' " >                and t1.choose_park =  #{parkGroupId}            </if>            <if test="courseType != null and courseType != '' " >                and t1.course_type =  #{courseType}            </if>            <if test="courseName != null and courseName != '' " >                and t1.course_name like CONCAT('%',#{courseName},'%')             </if>            <if test="target != null and target != '' " >                and t1.target like CONCAT('%',#{target},'%')             </if>            <if test="city != null and city != '' " >                and t1.city like CONCAT('%',#{city},'%')             </if>            <if test="offlineType == 0" >	            and t1.offline_type = '0'       		</if>            <if test="offlineType == 1" >	            and offline_type in ('1','4')            </if>            <if test="offlineType == 2" >	            and offline_type in ('2','3')            </if>        </where>        UNION        SELECT            *        FROM            etop_offline_training t1        <where>       		 course_status in('0','1','4')            <if test="courseType != null and courseType != '' " >                and t1.course_type =  #{courseType}            </if>            <if test="courseName != null and courseName != '' " >                and t1.course_name like CONCAT('%',#{courseName},'%')             </if>            <if test="target != null and target != '' " >                and t1.target = #{target}            </if>            <if test="city != null and city != '' " >                and t1.city like CONCAT('%',#{city},'%')             </if>            <if test="offlineType == 0" >	            and t1.offline_type = '0'       		</if>            <if test="offlineType == 1" >	            and offline_type in ('1','4')            </if>            <if test="offlineType == 2" >	            and offline_type in ('2','3')            </if>        </where>	        UNION		        SELECT	            *	        FROM            etop_offline_training t1	        <where>	          t1.target like 'all%'	          and t1.choose_park = 'all'	          and course_status in('0','1','4')	            <if test="courseType != null and courseType != '' " >	                and t1.course_type =  #{courseType}	            </if>	            <if test="courseName != null and courseName != '' " >	                and t1.course_name like CONCAT('%',#{courseName},'%') 	            </if>	            <if test="city != null and city != '' " >                and t1.city like CONCAT('%',#{city},'%')         	    </if>	            <if test="offlineType == 0" >		            and t1.offline_type = '0'	       		</if>	            <if test="offlineType == 1" >		            and t1.offline_type in ('1','4')	            </if>	            <if test="offlineType == 2" >		            and t1.offline_type in ('2','3')	            </if>	        </where>	         )T	        GROUP BY T.createdAt DESC      </select>      	       <select id="getCity" resultType="map" parameterType="map">			SELECT				city,				count(*) AS num			FROM				etop_offline_training			<where>				1=1				<if test="type == 0" >		            and offline_type = '0'	       		</if>	            <if test="type == 3" >		            and offline_type in ('1','4')	            </if>	            <if test="type == 2" >		            and offline_type in ('2','3')	            </if>			</where>			GROUP BY				city			ORDER BY				num DESC	      </select>	      	       <select id="getCitys" resultType="map" parameterType="map">			SELECT				city			FROM				etop_offline_training			<where>				 course_status in('0','1')				<if test="offlineType == 0" >		            and offline_type = '0'	       		</if>	            <if test="offlineType == 3" >		            and offline_type in ('1','4')	            </if>	            <if test="offlineType == 2" >		            and offline_type in ('2','3')	            </if>			</where>			GROUP BY				city				      </select></mapper>