<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE mapper  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"  "http://mybatis.org/dtd/mybatis-3-mapper.dtd"><mapper namespace="com.etop.website.dao.WebUserDao" > <!-- Result Map--><resultMap id="BaseResultMap" type="com.etop.website.bean.EtopUser" >	<result column="id" property="id"/>	<result column="user_name" property="userName"/>	<result column="pass_word" property="passWord"/>	<result column="pass_wordSalt" property="passWordSalt"/>	<result column="user_type" property="userType"/>	<result column="company_id" property="companyId"/>	<result column="park_id" property="parkId"/>	<result column="mobile" property="mobile"/>	<result column="email" property="email"/>	<result column="activated" property="activated"/>	<result column="create_at" property="createAt"/>	<result column="update_at" property="updateAt"/></resultMap>       <!-- etop_user table all fields --><sql id="Base_Column_List" >	 id,user_name,pass_word,pass_wordSalt,user_type,company_id,park_id,mobile,email,activated,create_at,update_at	 </sql><sql id="Base_Column_List_noPassWord" >	 id,user_name,user_type,company_id,park_id,mobile,email,activated,create_at,update_at	 </sql><!-- 查询条件 --><sql id="Example_Where_Clause">where 1=1<trim  suffixOverrides="," >		<if test="id != null and id != ''" >	    and id =  #{id}	</if>			<if test="userName != null and userName != ''" >	    and user_name =  #{userName}	</if>			<if test="passWord != null and passWord != ''" >	    and pass_word =  #{passWord}	</if>				<if test="passWordSalt != null and passWordSalt != ''" >	    and pass_wordSalt =  #{passWordSalt}	</if>				<if test="userType != null and userType != ''" >	    and user_type =  #{userType}	</if>			<if test="companyId != null and companyId != ''" >	    and company_id =  #{companyId}	</if>			<if test="parkId != null and parkId != ''" >	    and park_id =  #{parkId}	</if>			<if test="mobile != null and mobile != ''" >	    and mobile =  #{mobile}	</if>		<if test="email != null and email != ''" >	    and email =  #{email}	</if>		<if test="activated != null and activated != ''" >	    and activated =  #{activated}	</if>		<if test="createAt != null and createAt != ''" >	    and create_at =  #{createAt}	</if>		<if test="updateAt != null and updateAt != ''" >	    and update_at =  #{updateAt}	</if>	</trim></sql>  <!-- 插入记录 --><insert id="addUserInfo" parameterType="com.etop.website.bean.EtopUser" >  insert into etop_user(id,user_name,pass_word,pass_wordSalt,user_type,company_id,park_id,mobile,email,activated,create_at,update_at) values(#{id},#{userName},#{passWord},#{passWordSalt},#{userType},#{companyId},#{parkId},#{mobile},#{email},#{activated},#{createAt},#{updateAt})</insert>  <!-- 修改记录，只修改只不为空的字段 --><update id="updateUserInfo" parameterType="com.etop.website.bean.EtopUser" >	update etop_user set 	<trim  suffixOverrides="," >	<if test="userName != null  ">		user_name=#{userName},	</if>	<if test="passWord != null  ">		pass_word=#{passWord},	</if>	<if test="passWordSalt != null  ">		pass_wordSalt=#{passWordSalt},	</if>	<if test="userType != null  ">		user_type=#{userType},	</if>	<if test="companyId != null  ">		company_id=#{companyId},	</if>	<if test="parkId != null  ">		park_id=#{parkId},	</if>	<if test="mobile != null  ">		mobile=#{mobile},	</if>	<if test="email != null  ">		email=#{email},	</if>	<if test="activated != null  ">		activated=#{activated},	</if>	<if test="createAt != null  ">		create_at=#{createAt},	</if>	<if test="updateAt != null  ">		update_at=#{updateAt},	</if>	</trim>	where id = #{id}</update> <!-- 修改激活/关闭 --><update id="activeOrCloseUser" parameterType="com.etop.website.bean.EtopUser" >	update etop_user set activated = #{activated},	update_at=#{updateAt}	where id = #{id}</update> <!-- 修改密码 --><update id="changePassword" parameterType="com.etop.website.bean.EtopUser" >	update etop_user set 	pass_word=#{passWord},	pass_wordSalt=#{passWordSalt},	update_at=#{updateAt}		where id = #{id}</update> <!-- 根据id查询  --><select id="getUserInfo"  resultMap="BaseResultMap" parameterType="string">	select <include refid="Base_Column_List_noPassWord" /> 	 from etop_user eu where eu.id = #{id}</select><!-- 根据userName查询  --><select id="getUserInfoByUserName"  resultMap="BaseResultMap" parameterType="string">	select <include refid="Base_Column_List" /> 	 from etop_user where user_name = #{userName}</select><!-- 根据角色ID查询  --><select id="getUserListByRoleIds"  resultMap="BaseResultMap" parameterType="string">	 select 	 eu.id,eu.user_name,eu.user_type,eu.company_id,eu.park_id,eu.mobile,eu.email,eu.activated,eu.create_at,eu.update_at	 from etop_user_role eur 	 left join etop_user eu on (eu.id = eur.user_id)	 where  eur.role_id in	 <foreach item="item" index="index" collection="list" open="(" separator="," close=")">  		 #{item}  	</foreach> 	and eu.activated =1</select><!-- 根据id查询密码  --><select id="getUserPassword"  resultMap="BaseResultMap" parameterType="string">	select id,pass_word,pass_wordSalt	 from etop_user where id = #{id}</select><select id="getUserList" resultMap="BaseResultMap" parameterType="com.etop.website.bean.EtopUser">	select <include refid="Base_Column_List_noPassWord" />	from etop_user	<include refid="Example_Where_Clause"/></select></mapper>   